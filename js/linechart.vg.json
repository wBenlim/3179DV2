{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "description": "line chart for Victoria and NSW.",
  "data": {
    "url": "https://raw.githubusercontent.com/wBenlim/3179DV2/main/FIT3179DV2/data/Dv2dataset1.csv"
  },

  "params": [
    {
      "name": "metricSelect",
      "value": "Fiilledjobsinthousands",
      "bind": {
        "input": "select",
        "options": [
          "Grossvalueaddedinmillions",
          "Grossregionalproductinmillions",
          "Fiilledjobsinthousands"
        ],
        "labels": [
          "Gross Value Added (millions)",
          "Gross Regional Product (millions)",
          "Filled Jobs (thousands)"
        ],
        "name": "Select a Metric: "
      }
    }
  ],

  "transform": [
    {"filter": "datum.Region == 'VICTORIA' || datum.Region == 'NEWSOUTHWALES'"},
    {"filter": "datum.label == metricSelect"},
    {
      "fold": [
        "2014", "2015", "2016", "2017", "2018",
        "2019", "2020", "2021", "2022", "2023", "2024"
      ],
      "as": ["Year", "Value"]
    },
    {"calculate": "toNumber(datum.Value)", "as": "Value"}
  ],

  "vconcat": [
    {
      "width": 650,
      "height": 350,
      "mark": {"type": "line", "point": true},
      "encoding": {
        "x": {
          "field": "Year",
          "type": "ordinal",
          "scale": {"domain": {"param": "yearBrush"}},
          "title": "Year"
        },
        "y": {
          "field": "Value",
          "type": "quantitative",
          "title": "Value"
        },
        "color": {
          "field": "Region",
          "type": "nominal",
          "title": "Region",
          "legend": {
            "orient": "right",
            "titleFontSize": 13,
            "labelFontSize": 11,
            "padding": 8
          }},
        "tooltip": [
          {"field": "Region", "type": "nominal"},
          {"field": "Year", "type": "ordinal"},
          {"field": "Value", "type": "quantitative", "title": "Value"}
        ]
      }
    },
    {
      "width": 650,
      "height": 80,
      "mark": "area",
      "params": [{"name": "yearBrush", "select": {"type": "interval", "encodings": ["x"]}}],
      "encoding": {
        "x": {"field": "Year", "type": "ordinal", "title": "Year"},
        "y": {
          "field": "Value",
          "type": "quantitative",
          "axis": {"tickCount": 3, "grid": false}
        },
        "color": {"field": "Region", "type": "nominal", "legend": null}
      }
    }
  ]
}
